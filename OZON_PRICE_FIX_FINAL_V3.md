# Ozon Price Fix - Final Version 3

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!

### –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

1. **–§—É–Ω–∫—Ü–∏—è `normalize_price()` —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç int**
   - –ë—ã–ª–æ: `return price_val / 100` (float)
   - –°—Ç–∞–ª–æ: `return int(price_val / 100)` (int)

2. **–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—Å–µ–≥–¥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞**
   - –ë—ã–ª–æ: `"price": price`
   - –°—Ç–∞–ª–æ: `"price": int(price) if price else 0`

3. **–û–±–µ —Ü–µ–Ω—ã (price –∏ old_price) –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ int**

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```
Ozon –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç: 199900 (–∫–æ–ø–µ–π–∫–∏)
‚Üì
normalize_price() –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç: > 10000 ‚Üí –∫–æ–ø–µ–π–∫–∏
‚Üì
–î–µ–ª–∏—Ç –Ω–∞ 100: 199900 / 100 = 1999.0
‚Üì
–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ int: int(1999.0) = 1999
‚Üì
–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î: 1999‚ÇΩ
```

### ‚ö†Ô∏è –í–ê–ñ–ù–û: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Python API —Å–µ—Ä–≤–µ—Ä!

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ `parsers/ozon.py` –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:

```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç
./restart_api.sh

# –í–∞—Ä–∏–∞–Ω—Ç 2: –í—Ä—É—á–Ω—É—é
pkill -f "python.*api_server.py"
python3 api_server.py &
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ API —Å–µ—Ä–≤–µ—Ä (—Å–º. –≤—ã—à–µ)
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä —Å Ozon
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ü–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è (–±–µ–∑ –ª–∏—à–Ω–∏—Ö –Ω—É–ª–µ–π)
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -f /tmp/api_server.log`

### –ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö:

```
üîç Ozon JSON-LD: –ò—Å—Ö–æ–¥–Ω–∞—è —Ü–µ–Ω–∞ = 199900.0
üîß Ozon: –¶–µ–Ω–∞ 199900 –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –∫–æ–ø–µ–π–∫–∏, –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ 1999‚ÇΩ
‚úÖ Ozon JSON-LD: –§–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ = 1999‚ÇΩ
üì¶ Ozon: –†–µ–∑—É–ª—å—Ç–∞—Ç - –Ω–∞–∑–≤–∞–Ω–∏–µ: '...', —Ü–µ–Ω–∞: 1999, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: 3
```

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:

- ‚úÖ `parsers/ozon.py` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ normalize_price() –∏ result dictionary
- ‚úÖ `restart_api.sh` - –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ Frontend build —É—Å–ø–µ—à–µ–Ω (6.71s)

### –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤—Å–µ –µ—â–µ –µ—Å—Ç—å:

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Python API —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä—Å–µ—Ä (–Ω–µ simple –≤–µ—Ä—Å–∏—è)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -f /tmp/api_server.log`
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π —Ç–æ–≤–∞—Ä —Å Ozon

## –ì–æ—Ç–æ–≤–æ! üéâ
