# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–≤–æ–π–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞ - –í–µ—Ä—Å–∏—è 2

## –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å–µ –µ—â–µ –º–æ–∂–µ—Ç —Å–∫—Ä–æ–ª–ª–∏—Ç—å –≤–µ—Å—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å WebApp (–≤–∫–ª—é—á–∞—è header –∏ navigation) –≤–Ω—É—Ç—Ä–∏ Telegram, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–∞–Ω–∏—Ü.

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ —Å–∫—Ä–æ–ª–ª –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ `body`/`html`, –∞ –Ω–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ DOM:
```
html (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω)
‚îî‚îÄ body (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω)
    ‚îî‚îÄ #root (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω)
        ‚îî‚îÄ .telegram-app (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
            ‚îî‚îÄ div (–ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô —Å–∫—Ä–æ–ª–ª–∏—Ä—É–µ–º—ã–π —ç–ª–µ–º–µ–Ω—Ç)
                ‚îî‚îÄ Layout
                    ‚îî‚îÄ Header (–ù–ï –¥–æ–ª–∂–µ–Ω —Å–∫—Ä–æ–ª–ª–∏—Ç—å—Å—è)
                    ‚îî‚îÄ Content (–¥–æ–ª–∂–µ–Ω —Å–∫—Ä–æ–ª–ª–∏—Ç—å—Å—è)
                    ‚îî‚îÄ MobileNavBar (–ù–ï –¥–æ–ª–∂–µ–Ω —Å–∫—Ä–æ–ª–ª–∏—Ç—å—Å—è)
```

## –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª–µ–π
console.log('HTML overflow:', getComputedStyle(document.documentElement).overflow)
console.log('HTML position:', getComputedStyle(document.documentElement).position)
console.log('Body overflow:', getComputedStyle(document.body).overflow)
console.log('Body position:', getComputedStyle(document.body).position)

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª–∞—Å—Å–æ–≤
console.log('Body classes:', document.body.className)
console.log('HTML classes:', document.documentElement.className)

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
const container = document.getElementById('telegram-app-container')
console.log('Container overflow:', getComputedStyle(container).overflow)
console.log('Container position:', getComputedStyle(container).position)
```

### 2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```javascript
// –ö–∞–∫–æ–π —ç–ª–µ–º–µ–Ω—Ç —Å–∫—Ä–æ–ª–ª–∏—Ç—Å—è?
document.addEventListener('scroll', (e) => {
  console.log('Scroll event on:', e.target)
}, true)

// –ü—Ä–æ–≤–µ—Ä–∫–∞ scrollTop
setInterval(() => {
  console.log('HTML scrollTop:', document.documentElement.scrollTop)
  console.log('Body scrollTop:', document.body.scrollTop)
}, 1000)
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

### 1. CSS –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∏–∑-–∑–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç–∏
Telegram –º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å—Ç–∏–ª–∏ —Å –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ–π —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å—é.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å inline styles —Å `!important` —á–µ—Ä–µ–∑ JavaScript

### 2. Telegram –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Shadow DOM
Telegram –º–æ–∂–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ —Å—Ç–∏–ª–∏ —á–µ—Ä–µ–∑ Shadow DOM.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ Shadow DOM –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ç–∏–ª–∏ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ

### 3. –°–∫—Ä–æ–ª–ª –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ iframe
Telegram –º–æ–∂–µ—Ç –≤—Å—Ç—Ä–∞–∏–≤–∞—Ç—å WebApp –≤ iframe.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `window.parent !== window` –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ç–∏–ª–∏ –∫ parent

### 4. Touch events –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–∫—Ä–æ–ª–ª–∏—Ç—å —á–µ—Ä–µ–∑ touch events.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å `touch-action: none` –Ω–∞ body

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ä—ã

### 1. –î–æ–±–∞–≤–∏—Ç—å touch-action: none

–í `src/utils/telegram.ts` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `blockBodyScroll()`:

```typescript
document.body.style.setProperty('touch-action', 'none', 'important')
document.documentElement.style.setProperty('touch-action', 'none', 'important')
```

### 2. –£–≤–µ–ª–∏—á–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –ø—Ä–æ–≤–µ—Ä–∫–∏

–ò–∑–º–µ–Ω–∏—Ç—å `setInterval` —Å 1000ms –Ω–∞ 100ms:

```typescript
setInterval(() => {
  blockBodyScroll()
}, 100) // –ë—ã–ª–æ 1000
```

### 3. –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å window.scrollTo()

```typescript
// –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º window.scrollTo
const originalScrollTo = window.scrollTo
window.scrollTo = function(x, y) {
  console.log('üö´ window.scrollTo blocked:', x, y)
  // –ù–µ –≤—ã–∑—ã–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
}
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å iframe

```typescript
if (window.parent !== window) {
  console.log('‚ö†Ô∏è App is running inside iframe')
  // –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ç–∏–ª–∏ –∫ parent
  try {
    window.parent.document.body.style.overflow = 'hidden'
  } catch (e) {
    console.log('Cannot access parent frame (CORS)')
  }
}
```

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram WebApp
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å"
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

## –ß—Ç–æ —Å–æ–æ–±—â–∏—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

```javascript
// 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª–µ–π
console.log('=== STYLES CHECK ===')
console.log('HTML overflow:', getComputedStyle(document.documentElement).overflow)
console.log('HTML position:', getComputedStyle(document.documentElement).position)
console.log('Body overflow:', getComputedStyle(document.body).overflow)
console.log('Body position:', getComputedStyle(document.body).position)

// 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª–∞—Å—Å–æ–≤
console.log('=== CLASSES CHECK ===')
console.log('Body classes:', document.body.className)
console.log('HTML classes:', document.documentElement.className)

// 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram API
console.log('=== TELEGRAM API CHECK ===')
console.log('Telegram available:', !!window.Telegram)
console.log('WebApp available:', !!window.Telegram?.WebApp)
console.log('disableVerticalSwipes available:', !!window.Telegram?.WebApp?.disableVerticalSwipes)

// 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ iframe
console.log('=== IFRAME CHECK ===')
console.log('Is iframe:', window.parent !== window)

// 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ scrollTop –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ
console.log('=== SCROLL CHECK (–ø—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É) ===')
setTimeout(() => {
  console.log('HTML scrollTop:', document.documentElement.scrollTop)
  console.log('Body scrollTop:', document.body.scrollTop)
  const container = document.getElementById('telegram-app-container')
  if (container) {
    console.log('Container scrollTop:', container.scrollTop)
  }
}, 3000)
```

## –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç, –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Ä–∞–¥–∏–∫–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–±—Ä–∞—Ç—å header –∏ navigation –∏–∑ —Å–∫—Ä–æ–ª–ª–∞

–°–¥–µ–ª–∞—Ç—å header –∏ navigation —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏, –∞ –∫–æ–Ω—Ç–µ–Ω—Ç —Å–∫—Ä–æ–ª–ª–∏—Ä—É–µ–º—ã–º —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å position: sticky –≤–º–µ—Å—Ç–æ fixed

–ò–Ω–æ–≥–¥–∞ `position: sticky` —Ä–∞–±–æ—Ç–∞–µ—Ç –ª—É—á—à–µ –≤ WebApp.

### –í–∞—Ä–∏–∞–Ω—Ç 3: –û—Ç–∫–ª—é—á–∏—Ç—å –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Ç–æ–ª—å–∫–æ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ, –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –µ–≥–æ.

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–æ–π —ç–ª–µ–º–µ–Ω—Ç —Å–∫—Ä–æ–ª–ª–∏—Ç—Å—è
3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–µ–∞–ª—å–Ω–æ–º Telegram WebApp
