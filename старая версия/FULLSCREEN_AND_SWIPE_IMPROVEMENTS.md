# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –∏ —Å–≤–∞–π–ø–∞ –Ω–∞–∑–∞–¥

## –î–∞—Ç–∞: 2025-01-16

## –ü—Ä–æ–±–ª–µ–º—ã
1. **–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏**
2. **–°–≤–∞–π–ø –Ω–∞–∑–∞–¥ —Å –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–ª–æ—Ö–æ (–Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞)**

## –†–µ—à–µ–Ω–∏—è

### 1. –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö (src/App.tsx)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `forceFullscreen` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ScrollToTop`
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞ (`pathname`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `forceFullscreen()`
- –í—ã–∑–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∏ —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏ (100ms, 300ms) –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏

**–ö–æ–¥:**
```typescript
function ScrollToTop() {
  const { pathname } = useLocation();
  const { isTelegram, forceFullscreen } = useTelegramWebApp();

  useEffect(() => {
    // –°–∫—Ä–æ–ª–ª –≤ –Ω–∞—á–∞–ª–æ
    requestAnimationFrame(() => {
      const scrollableContainer = document.querySelector('.scrollable');
      if (scrollableContainer) {
        scrollableContainer.scrollTop = 0;
      } else {
        window.scrollTo(0, 0);
      }
    });

    // –ö–†–ò–¢–ò–ß–ù–û: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ—Ö–æ–¥–µ
    if (isTelegram) {
      forceFullscreen(); // –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ
      setTimeout(() => forceFullscreen(), 100); // –ß–µ—Ä–µ–∑ 100ms
      setTimeout(() => forceFullscreen(), 300); // –ß–µ—Ä–µ–∑ 300ms
    }
  }, [pathname, isTelegram, forceFullscreen]);

  return null;
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –µ—Å–ª–∏ –æ–Ω –±—ã–ª –ø–æ—Ç–µ—Ä—è–Ω

---

### 2. –£–ª—É—á—à–µ–Ω–∏–µ —Å–≤–∞–π–ø–∞ –Ω–∞–∑–∞–¥ (src/hooks/useSwipeBack.ts)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

#### 2.1 –ë–æ–ª–µ–µ –º—è–≥–∫–∏–µ —É—Å–ª–æ–≤–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
- **–ü–æ—Ä–æ–≥ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è**: 80px ‚Üí **60px** (–º–µ–Ω—å—à–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏)
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å**: 0.25 ‚Üí **0.2** (–ª–µ–≥—á–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –±—ã—Å—Ç—Ä—ã–º —Å–≤–∞–π–ø–æ–º)
- **–ó–æ–Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏**: 80px ‚Üí **100px** –æ—Ç –ª–µ–≤–æ–≥–æ –∫—Ä–∞—è —ç–∫—Ä–∞–Ω–∞

#### 2.2 –£–ª—É—á—à–µ–Ω–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω `swipeDirection` ref –¥–ª—è —è–≤–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ë–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ vs –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ —Å–≤–∞–π–ø–∞
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç 1.5x –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è

#### 2.3 –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
```typescript
console.log('üü¢ Swipe start detected at x:', touch.clientX);
console.log('‚û°Ô∏è Horizontal swipe RIGHT detected');
console.log('üèÅ Swipe end - deltaX:', deltaX, 'velocity:', swipeVelocity);
console.log('‚úÖ Navigating back!');
```

#### 2.4 –£–º–µ–Ω—å—à–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- 100ms ‚Üí **50ms** –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–π —Ä–µ–∞–∫—Ü–∏–∏

#### 2.5 –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ touchcancel
- –û—Ç–¥–µ–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `handleTouchCancel` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–ö–æ–¥ (–∫–ª—é—á–µ–≤—ã–µ —á–∞—Å—Ç–∏):**
```typescript
// –ë–æ–ª–µ–µ –º—è–≥–∫–∏–µ —É—Å–ª–æ–≤–∏—è
const threshold = 60; // –±—ã–ª–æ 80
const velocity = 0.2; // –±—ã–ª–æ 0.25

// –£–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è –∑–æ–Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
if (touch.clientX < 100) { // –±—ã–ª–æ 80
  // –Ω–∞—á–∏–Ω–∞–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
}

// –£–ª—É—á—à–µ–Ω–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
if (absDeltaX > absDeltaY * 1.5) {
  // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–≤–∞–π–ø
  if (deltaX > 0) {
    swipeDirection.current = 'horizontal';
    isSwipingRef.current = true;
    setIsSwiping(true);
  }
}

// –ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
setTimeout(() => {
  navigate(-1);
}, 50); // –±—ã–ª–æ 100
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°–≤–∞–π–ø —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞
- ‚úÖ –ú–µ–Ω—å—à–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ (60px –≤–º–µ—Å—Ç–æ 80px)
- ‚úÖ –ë–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤–∞–π–ø–∞
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —Å–≤–∞–π–ø (50ms –∑–∞–¥–µ—Ä–∂–∫–∞)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram WebApp
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ (–ì–ª–∞–≤–Ω–∞—è ‚Üí –ö–∞—Ç–∞–ª–æ–≥ ‚Üí –ü—Ä–æ—Ñ–∏–ª—å)
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ

### –°–≤–∞–π–ø –Ω–∞–∑–∞–¥
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É —Ç–æ–≤–∞—Ä–∞
2. –ü—Ä–æ–≤–µ–¥–∏—Ç–µ –ø–∞–ª—å—Ü–µ–º –æ—Ç –ª–µ–≤–æ–≥–æ –∫—Ä–∞—è —ç–∫—Ä–∞–Ω–∞ –≤–ø—Ä–∞–≤–æ
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: 
   - –ü–æ—è–≤–ª—è–µ—Ç—Å—è –∑–µ–ª–µ–Ω–∞—è —Å—Ç—Ä–µ–ª–∫–∞
   - –ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞–∑–∞–¥ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ —Å–≤–∞–π–ø–µ –Ω–∞ 60px –∏–ª–∏ –±—ã—Å—Ç—Ä–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏
   - –í –∫–æ–Ω—Å–æ–ª–∏ –≤–∏–¥–Ω—ã –ª–æ–≥–∏ —Å–≤–∞–π–ø–∞

---

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã
- ‚úÖ `src/App.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ fullscreen –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö
- ‚úÖ `src/hooks/useSwipeBack.ts` - —É–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–≤–∞–π–ø–∞ –Ω–∞–∑–∞–¥

## –°–±–æ—Ä–∫–∞
- ‚úÖ –£—Å–ø–µ—à–Ω–∞—è —Å–±–æ—Ä–∫–∞ –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ 1891 –º–æ–¥—É–ª–µ–π —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–æ
- ‚úÖ –†–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞: 286.89 kB (79.97 kB gzip)
