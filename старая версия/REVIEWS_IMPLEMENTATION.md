# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –æ—Ç–∑—ã–≤–æ–≤

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è `005_add_reviews_system.sql` —Å–æ–∑–¥–∞–Ω–∞ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `reviews` —Å –ø–æ–ª—è–º–∏ –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤, –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∏ –æ—Ç–≤–µ—Ç–æ–≤ –∞–¥–º–∏–Ω–∞
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `products` (–¥–æ–±–∞–≤–ª–µ–Ω—ã `reviews_count`, `average_rating`)
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 2. –£—Ç–∏–ª–∏—Ç—ã
- ‚úÖ `src/utils/imageCompression.ts` - —Å–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π
- ‚úÖ `src/utils/reviewStorage.ts` - —Ä–∞–±–æ—Ç–∞ —Å Supabase Storage –¥–ª—è —Ñ–æ—Ç–æ –æ—Ç–∑—ã–≤–æ–≤

### 3. –¢–∏–ø—ã
- ‚úÖ `src/types/review.ts` - TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è Review, ReviewFormData, ReviewStats

### 4. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ `src/components/reviews/StarRating.tsx` - –∑–≤–µ–∑–¥–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∏ readonly)
- ‚úÖ `src/components/reviews/PhotoUpload.tsx` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ (–º–∞–∫—Å 3)
- ‚úÖ `src/components/reviews/ReviewForm.tsx` - —Ñ–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–∑—ã–≤–∞
- ‚úÖ `src/components/reviews/ReviewCard.tsx` - –∫–∞—Ä—Ç–æ—á–∫–∞ –æ—Ç–∑—ã–≤–∞
- ‚úÖ `src/components/reviews/ReviewList.tsx` - —Å–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π

### 5. –•—É–∫–∏
- ‚úÖ `src/hooks/useReviews.ts` - —Ö—É–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ—Ç–∑—ã–≤–∞–º–∏ (CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏)

### 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `src/pages/ProductDetailPage.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "–û—Ç–∑—ã–≤—ã"
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `src/lib/supabase.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∏–ø—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã reviews

### 7. –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
- ‚úÖ `src/pages/admin/ReviewModerationPage.tsx` - –º–æ–¥–µ—Ä–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤
- ‚úÖ `src/pages/admin/ProductAnalyticsPage.tsx` - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å –ª–∞–π–∫–∞–º–∏ –∏ –æ—Ç–∑—ã–≤–∞–º–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `src/pages/AdminPage.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø—É–Ω–∫—Ç—ã –º–µ–Ω—é

### 8. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `date-fns` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Storage
–°–æ–∑–¥–∞—Ç—å bucket –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –æ—Ç–∑—ã–≤–æ–≤:

```bash
node scripts/setup-review-storage.js
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é –≤ Supabase Dashboard:
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ Storage
2. –°–æ–∑–¥–∞—Ç—å bucket `review-photos`
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–∞–∫ public
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç 10 –ú–ë
5. –†–∞–∑—Ä–µ—à–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç—ã: JPG, PNG, WEBP

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–°–º. `REVIEWS_TESTING.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–æ–≤–∞—Ä–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞ (—Ä–µ–π—Ç–∏–Ω–≥ 1-5, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, –¥–æ 3 —Ñ–æ—Ç–æ)
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Å–≤–æ–µ–≥–æ –æ—Ç–∑—ã–≤–∞
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ—Ç–∑—ã–≤–æ–≤ (–ø–æ –¥–∞—Ç–µ, —Ä–µ–π—Ç–∏–Ω–≥—É, —Å —Ñ–æ—Ç–æ)
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤ (10 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ—Ç–∑—ã–≤–æ–≤

### –î–ª—è –∞–¥–º–∏–Ω–æ–≤
- ‚úÖ –ú–æ–¥–µ—Ä–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤ (–æ–¥–æ–±—Ä–∏—Ç—å/–æ—Ç–∫–ª–æ–Ω–∏—Ç—å)
- ‚úÖ –û—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Ç–∑—ã–≤—ã
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### RLS –ø–æ–ª–∏—Ç–∏–∫–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–∑—ã–≤—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–µ–±—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –æ—Ç–∑—ã–≤—ã
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —É–¥–∞–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –æ—Ç–∑—ã–≤—ã
- –í—Å–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ –æ—Ç–∑—ã–≤—ã
- –ê–¥–º–∏–Ω—ã –º–æ–≥—É—Ç –º–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∑—ã–≤—ã

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- –†–µ–π—Ç–∏–Ω–≥: 1-5 –∑–≤–µ–∑–¥ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –¥–æ 1000 —Å–∏–º–≤–æ–ª–æ–≤ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- –§–æ—Ç–æ: –º–∞–∫—Å–∏–º—É–º 3, —Ñ–æ—Ä–º–∞—Ç—ã JPG/PNG/WEBP, –¥–æ 10 –ú–ë –∫–∞–∂–¥–æ–µ
- –ê–≤—Ç–æ—Å–∂–∞—Ç–∏–µ —Ñ–æ—Ç–æ –¥–æ 5 –ú–ë –∏ 1920px

## üìù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç–∑—ã–≤–æ–≤
```typescript
import { useReviews } from '@/hooks/useReviews'

const { reviews, stats, loading } = useReviews(productId)
```

### –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞
```typescript
const { createReview } = useReviews(productId)

await createReview({
  rating: 5,
  comment: '–û—Ç–ª–∏—á–Ω—ã–π —Ç–æ–≤–∞—Ä!',
  photos: [file1, file2]
})
```

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞
```typescript
const { updateReview } = useReviews(productId)

await updateReview(reviewId, {
  rating: 4,
  comment: '–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –æ—Ç–∑—ã–≤',
  photos: []
})
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç–æ–≤–∞—Ä–∞
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–û—Ç–∑—ã–≤—ã"
3. –û—Å—Ç–∞–≤—å—Ç–µ –æ—Ç–∑—ã–≤ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ—Ç–∑—ã–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é
5. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∑—ã–≤
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—é

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](./REVIEWS_AND_ANALYTICS_PLAN.md)
- [–ú–∏–≥—Ä–∞—Ü–∏—è –ë–î](./migrations/005_add_reviews_system.sql)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏](./REVIEWS_MIGRATION_GUIDE.md)
