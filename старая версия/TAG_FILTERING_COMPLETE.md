# Реализация фильтрации по меткам в каталоге

## Что сделано

### 1. Извлечение уникальных меток
- Добавлен `useMemo` хук для извлечения всех уникальных меток из текущих товаров
- Метки категорий (Для неё, Для него, и т.д.) исключены из списка меток
- Метки отсортированы по алфавиту (русская локаль)

### 2. Горизонтальная прокрутка меток
- Метки отображаются в горизонтальном скроллируемом списке
- Используется `overflow-x-auto` для прокрутки на мобильных устройствах
- Применен `snap-x snap-mandatory` для плавной прокрутки
- Класс `scrollbar-hide` скрывает полосу прокрутки для чистого UI

### 3. Множественный выбор меток
- Реализована функция `handleTagToggle` для переключения меток
- Можно выбрать несколько меток одновременно
- Выбранные метки отображаются с галочкой (✓) и активным стилем
- Счетчик выбранных меток показывается рядом с кнопкой "Сбросить"

### 4. Динамическая фильтрация
- Товары фильтруются по выбранным меткам (логика AND - товар должен иметь все выбранные метки)
- Метки обновляются динамически на основе текущего набора товаров
- Если товары отфильтрованы по категории, метки показывают только те, что есть в этой категории

### 5. Визуальный дизайн
- Выбранные метки: зеленый фон, белый текст, тень
- Невыбранные метки: прозрачный фон, рамка, hover эффекты
- Округлые кнопки (`rounded-full`) для меток
- Адаптивные размеры для мобильных и десктопных устройств

### 6. Сброс фильтров
- Кнопка "Сбросить" очищает выбранные метки
- Общая кнопка "Сбросить фильтры" также очищает метки
- Кнопка "Сбросить" в модальном окне фильтров очищает метки

## Технические детали

### Файлы изменены
- `src/pages/CatalogPage.tsx`

### Добавленные функции
```typescript
// Извлечение уникальных меток
const availableTags = useMemo(() => {
  const categoryTags = Object.values(CATEGORY_MAP).flat();
  const tagSet = new Set<string>();
  
  sourceProducts.forEach(product => {
    product.tags.forEach(tag => {
      if (!categoryTags.includes(tag)) {
        tagSet.add(tag);
      }
    });
  });
  
  return Array.from(tagSet).sort((a, b) => a.localeCompare(b, 'ru'));
}, [sourceProducts]);

// Переключение метки
const handleTagToggle = (tag: string) => {
  setSelectedTags(prev => 
    prev.includes(tag) 
      ? prev.filter(t => t !== tag)
      : [...prev, tag]
  );
};
```

### Логика фильтрации
```typescript
// Фильтрация по выбранным меткам (AND логика)
if (selectedTags.length > 0) {
  nextProducts = nextProducts.filter((product) =>
    selectedTags.every((tag) => product.tags.includes(tag))
  );
}
```

## Результат
✅ Метки листаются горизонтально на мобильных устройствах
✅ Можно выбирать несколько меток одновременно
✅ Метки динамически обновляются на основе текущих товаров
✅ Товары фильтруются по выбранным меткам
✅ Проект успешно собирается без ошибок
