# ‚úÖ –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —á–µ–∫–ª–∏—Å—Ç–∞ –∏–º–ø–æ—Ä—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤

## 0Ô∏è‚É£ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
- ‚úÖ `pip install playwright flask` - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- ‚úÖ `playwright install chromium` - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- ‚úÖ Express Proxy –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã (CORS)
- ‚úÖ Python API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ localhost:5001

## 1Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Playwright (–¥–ª—è –≤—Å–µ—Ö –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤)
- ‚úÖ `headless = False` (–º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ `PLAYWRIGHT_HEADLESS=false`)
- ‚úÖ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π User-Agent (Mac –±—Ä–∞—É–∑–µ—Ä)
- ‚úÖ `navigator.webdriver = undefined` (—Å–∫—Ä—ã—Ç–æ)
- ‚úÖ –õ–æ–∫–∞–ª—å: `ru-RU`, —Ç–∞–π–º–∑–æ–Ω–∞: `Europe/Moscow`
- ‚úÖ –°–ª—É—á–∞–π–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏: 3‚Äì5 —Å–µ–∫—É–Ω–¥
- ‚úÖ –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏: `page.goto(url, wait_until='networkidle')`
- ‚úÖ Retry: 3 –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –ø—É—Å—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–ø—á–∏ (URL –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)

## 2Ô∏è‚É£ Wildberries
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `window.__WBLB_INITIAL_DATA__.product`
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ: `name`, `title`, `productName`, `imt_name` ‚Üí `title`
- ‚úÖ –¶–µ–Ω–∞: `salePriceU / 100` ‚Üí `price`
- ‚úÖ –°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞: `priceU / 100` ‚Üí `old_price`
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: `photos[].fullSize` ‚Üí `images`
- ‚úÖ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏: `specs` ‚Üí `characteristics`
- ‚úÖ –°–æ—Å—Ç–∞–≤: `composition` ‚Üí `composition`
- ‚úÖ –ù–∞–ª–∏—á–∏–µ: `inStock` ‚Üí `in_stock`
- ‚úÖ Retry –º–µ—Ö–∞–Ω–∏–∑–º: 3 –ø–æ–ø—ã—Ç–∫–∏
- ‚úÖ Fallback –Ω–∞ DOM –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ

## 3Ô∏è‚É£ Ozon
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `window.__APP_STATE__`, `window.__INITIAL_STATE__`
- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ: `product.name` –∏–ª–∏ `product.title`
- ‚úÖ –¶–µ–Ω–∞: —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ–ø–µ–π–∫–∏ (`price / 100` –µ—Å–ª–∏ > 1000)
- ‚úÖ –°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞: `oldPrice / 100` (–µ—Å–ª–∏ –µ—Å—Ç—å)
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: –æ—Ä–∏–≥–∏–Ω–∞–ª—ã `/w2000/` –¥–ª—è –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
- ‚úÖ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏: `specs` ‚Üí `characteristics`
- ‚úÖ –ù–∞–ª–∏—á–∏–µ: `inStock` / `available`
- ‚úÖ Retry –º–µ—Ö–∞–Ω–∏–∑–º: 3 –ø–æ–ø—ã—Ç–∫–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–ø—á–∏ —á–µ—Ä–µ–∑ URL/–∑–∞–≥–æ–ª–æ–≤–∫–∏

## 4Ô∏è‚É£ –Ø–Ω–¥–µ–∫—Å –ú–∞—Ä–∫–µ—Ç
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `window.__INITIAL_DATA__`, `window.__INITIAL_STATE__`
- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ: `title` / `name`
- ‚úÖ –¶–µ–Ω–∞: –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∏–∞–ø–∞–∑–æ–Ω–∞ 10‚Äì10,000,000 ‚ÇΩ
- ‚úÖ –°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞: –µ—Å–ª–∏ –µ—Å—Ç—å
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: –∏–∑ `gallery` –∏–ª–∏ `photos`
- ‚úÖ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏: `specs` / `attributes`
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ: `description`
- ‚úÖ –ù–∞–ª–∏—á–∏–µ: `available` / `inStock`
- ‚úÖ DOM —Ç–æ–ª—å–∫–æ fallback
- ‚úÖ –ñ–¥–µ—Ç `networkidle`
- ‚úÖ –£–¥–∞–ª—è–µ—Ç –ª–∏—à–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL
- ‚úÖ Retry –ø—Ä–∏ –ø—É—Å—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö: 3 –ø–æ–ø—ã—Ç–∫–∏

## 5Ô∏è‚É£ Python –ø–∞—Ä—Å–µ—Ä—ã
- ‚úÖ –û—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞
- ‚úÖ –í `parse()`: –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ Playwright
- ‚úÖ –ñ–¥–µ—Ç `networkidle`
- ‚úÖ –ó–∞–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ JS-–æ–±—ä–µ–∫—Ç–∞
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç —Ü–µ–Ω—ã, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- ‚úÖ Retry + fallback –Ω–∞ DOM
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

## 6Ô∏è‚É£ Frontend (React)
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç API: `fetchViaBackendProxy(url)`
- ‚úÖ –ü—Ä–∏–º–µ–Ω—è–µ—Ç –Ω–∞—Ü–µ–Ω–∫—É: `finalPrice = price * (1 + marginPercent / 100)`
- ‚úÖ –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É: –≤—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## 7Ô∏è‚É£ Express Proxy
- ‚úÖ –ü—Ä–æ–∫—Å–∏ –¥–ª—è –æ–±—Ö–æ–¥–∞ CORS
- ‚úÖ –ü–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ Python API
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã

## 8Ô∏è‚É£ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–ø—á–∏: –µ—Å–ª–∏ URL —Å–æ–¥–µ—Ä–∂–∏—Ç `captcha` ‚Üí –æ—à–∏–±–∫–∞
- ‚úÖ –¢–∞–π–º–∞—É—Ç—ã: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –µ—Å–ª–∏ –ø–∞—Ä—Å–∏–Ω–≥ > 15 —Å–µ–∫—É–Ω–¥
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
  - Python API ‚Üí `/tmp/api_server.log` + –∫–æ–Ω—Å–æ–ª—å
  - Express Proxy ‚Üí –∫–æ–Ω—Å–æ–ª—å
  - Frontend ‚Üí –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ü–µ–Ω–∫–∏:
  - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 20%
  - –ú–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –¥–ª—è –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –∏–ª–∏ –º–∞—Å—Å–æ–≤–æ
  - –ù–∞—Ü–µ–Ω–∫–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Ü–µ–Ω—É —Å—Ä–∞–∑—É

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –≤—Ä–µ–º–µ–Ω–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–ø—á–∏ –≤ URL –ø–µ—Ä–µ–¥ –ø–∞—Ä—Å–∏–Ω–≥–æ–º
- ‚úÖ Retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä—Å–µ—Ä–æ–≤ (3 –ø–æ–ø—ã—Ç–∫–∏)
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–Ω—ã –¥–ª—è –Ø–Ω–¥–µ–∫—Å –ú–∞—Ä–∫–µ—Ç

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!
–í—Å–µ –ø—É–Ω–∫—Ç—ã —á–µ–∫–ª–∏—Å—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ.
