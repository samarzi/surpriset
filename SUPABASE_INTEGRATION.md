# Supabase Integration Complete ‚úÖ

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `@supabase/supabase-js`
- ‚úÖ –°–æ–∑–¥–∞–Ω –∫–ª–∏–µ–Ω—Ç Supabase –≤ `src/lib/supabase.ts`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã TypeScript —Ç–∏–ø—ã –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏ `migrations/001_initial_schema.sql`
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ç–∞–±–ª–∏—Ü—ã: `products`, `orders`, `banners`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ Row Level Security (RLS)
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `updated_at`

### 3. –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- ‚úÖ –°–æ–∑–¥–∞–Ω `src/lib/database.ts` —Å –ø–æ–ª–Ω—ã–º API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–∏ CRUD –¥–ª—è –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω —Å–µ—Ä–≤–∏—Å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

### 4. React —Ö—É–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω `src/hooks/useDatabase.ts` —Å —Ö—É–∫–∞–º–∏:
  - `useProducts()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
  - `useProduct()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
  - `useOrders()` - —Ä–∞–±–æ—Ç–∞ —Å –∑–∞–∫–∞–∑–∞–º–∏
  - `useBanners()` - —Ä–∞–±–æ—Ç–∞ —Å –±–∞–Ω–Ω–µ—Ä–∞–º–∏
  - `useProductSearch()` - –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤
  - `useCreateOrder()` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤

### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `src/types/index.ts` –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—Ö–µ–º–µ –ë–î
- ‚úÖ –ü—Ä–∏–≤–µ–¥–µ–Ω—ã –∫ snake_case –ø–æ–ª—è –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å PostgreSQL
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

### 6. –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ë–î
- ‚úÖ `npm run db:test` - —Ç–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ `npm run db:setup` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–æ–∑–¥–∞–Ω –ø—Ä–∏–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `DatabaseExample.tsx`

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
```bash
# 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Supabase Dashboard
# https://supabase.com/dashboard/project/rmcedkzodiqcxnpenjld

# 2. –û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor

# 3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞:
# migrations/001_initial_schema.sql
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```bash
npm run db:setup
```

### 3. –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```bash
npm run db:test
```

### 4. –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–∏–º–µ—Ä–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```bash
npm run dev
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ http://localhost:5173/db-test
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–¥–µ

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
```typescript
import { useProducts } from '@/hooks/useDatabase'

function ProductList() {
  const { products, loading, error } = useProducts({ 
    featured: true,
    status: 'in_stock' 
  })
  
  if (loading) return <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>
  if (error) return <div>–û—à–∏–±–∫–∞: {error}</div>
  
  return (
    <div>
      {products.map(product => (
        <div key={product.id}>{product.name}</div>
      ))}
    </div>
  )
}
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
```typescript
import { useCreateOrder } from '@/hooks/useDatabase'

function Checkout() {
  const { createOrder, loading } = useCreateOrder()
  
  const handleSubmit = async (orderData) => {
    try {
      const order = await createOrder({
        customer_name: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
        customer_email: 'ivan@example.com',
        customer_phone: '+7 900 123-45-67',
        items: [...],
        total: 2500.00,
        type: 'regular'
      })
      console.log('–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω:', order)
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞:', error)
    }
  }
}
```

### –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤
```typescript
import { useProductSearch } from '@/hooks/useDatabase'

function SearchBox() {
  const [query, setQuery] = useState('')
  const { results, loading } = useProductSearch(query)
  
  return (
    <div>
      <input 
        value={query}
        onChange={(e) => setQuery(e.target.value)}
        placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤..."
      />
      {loading && <div>–ü–æ–∏—Å–∫...</div>}
      {results.map(product => (
        <div key={product.id}>{product.name}</div>
      ))}
    </div>
  )
}
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `products`
- –¢–æ–≤–∞—Ä—ã –∏ –≥–æ—Ç–æ–≤—ã–µ –Ω–∞–±–æ—Ä—ã
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –°–∏—Å—Ç–µ–º–∞ —Ç–µ–≥–æ–≤ (–º–∞–∫—Å–∏–º—É–º 3)
- –°—Ç–∞—Ç—É—Å—ã –Ω–∞–ª–∏—á–∏—è
- –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ

### –¢–∞–±–ª–∏—Ü–∞ `orders`
- –ó–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ
- –¢–æ–≤–∞—Ä—ã –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –Ω–∞–±–æ—Ä–æ–≤

### –¢–∞–±–ª–∏—Ü–∞ `banners`
- –†–µ–∫–ª–∞–º–Ω—ã–µ –±–∞–Ω–Ω–µ—Ä—ã
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–æ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è
- –°—Å—ã–ª–∫–∏ –Ω–∞ —Ç–æ–≤–∞—Ä—ã/–∫–∞—Ç–µ–≥–æ—Ä–∏–∏

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ Row Level Security –≤–∫–ª—é—á–µ–Ω–∞ –Ω–∞ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
- ‚úÖ –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –∏ –±–∞–Ω–Ω–µ—Ä–æ–≤
- ‚úÖ Anon key –±–µ–∑–æ–ø–∞—Å–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ frontend
- ‚úÖ Service role key –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é** –≤ Supabase Dashboard
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ** —Å –ø–æ–º–æ—â—å—é `npm run db:setup`
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/db-test`
4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ** —Ö—É–∫–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
5. **–î–æ–±–∞–≤—å—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é** –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

## –§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è

- `src/lib/supabase.ts` - –∫–ª–∏–µ–Ω—Ç –∏ —Ç–∏–ø—ã
- `src/lib/database.ts` - API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- `src/hooks/useDatabase.ts` - React —Ö—É–∫–∏
- `src/components/examples/DatabaseExample.tsx` - –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- `migrations/001_initial_schema.sql` - —Å—Ö–µ–º–∞ –ë–î
- `DATABASE_SETUP.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase! üéâ