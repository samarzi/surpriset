# –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–≤–æ–π–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞ –≤ Telegram WebApp

## –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–∫—Ä–æ–ª–ª–∏—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (#root), –Ω–æ –∏ —Å–∞–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ Telegram WebApp, —á—Ç–æ —Å–æ–∑–¥–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç "–¥–≤–æ–π–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞".

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. JavaScript —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º (!important)

**–§–∞–π–ª: `src/utils/telegram.ts`**

–ò–∑–º–µ–Ω–µ–Ω–∏—è:
- –ò—Å–ø–æ–ª—å–∑—É–µ–º `setProperty()` —Å —Ñ–ª–∞–≥–æ–º `'important'` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å—Ç–∏–ª–µ–π —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º
- –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π Telegram WebApp

```typescript
document.documentElement.style.setProperty('overflow', 'hidden', 'important')
document.documentElement.style.setProperty('position', 'fixed', 'important')
document.body.style.setProperty('overflow', 'hidden', 'important')
document.body.style.setProperty('position', 'fixed', 'important')
```

### 2. MutationObserver –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–§–∞–π–ª: `src/utils/telegram.ts`**

–î–æ–±–∞–≤–ª–µ–Ω MutationObserver, –∫–æ—Ç–æ—Ä—ã–π:
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–∞ `style` –Ω–∞ `body` –∏ `html`
- –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ó–∞—â–∏—â–∞–µ—Ç –æ—Ç –ø–æ–ø—ã—Ç–æ–∫ Telegram –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∏–ª–∏

```typescript
const observer = new MutationObserver(() => {
  if (document.body.style.position !== 'fixed' || 
      document.body.style.overflow !== 'hidden') {
    blockBodyScroll()
  }
})
```

### 3. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏

**–§–∞–π–ª: `src/utils/telegram.ts`**

–î–æ–±–∞–≤–ª–µ–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π:
- `scroll` –Ω–∞ body –∏ html
- `touchmove` –Ω–∞ body –∏ html
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ª—é–±—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ body/html

```typescript
const preventScroll = (e: Event) => {
  if (e.target === document.body || e.target === document.documentElement) {
    e.preventDefault()
    e.stopPropagation()
    return false
  }
}
```

### 4. –£—Å–∏–ª–µ–Ω–Ω—ã–µ CSS –ø—Ä–∞–≤–∏–ª–∞

**–§–∞–π–ª: `src/index.css`**

–î–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞:
- –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ `top`, `left`, `right`, `bottom` –¥–ª—è `position: fixed`
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∫–ª–∞—Å—Å–æ–≤ `.telegram-env` –∏ `.telegram-fullscreen`
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å `!important`

```css
html, body {
  overflow: hidden !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
}
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞:

1. **CSS —É—Ä–æ–≤–µ–Ω—å**: –ë–∞–∑–æ–≤–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ —Å—Ç–∏–ª–∏
2. **JavaScript —É—Ä–æ–≤–µ–Ω—å**: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π —Å `!important` —á–µ—Ä–µ–∑ `setProperty()`
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Ä–æ–≤–µ–Ω—å**: MutationObserver –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç–∏–ª–∏
4. **–°–æ–±—ã—Ç–∏—è —É—Ä–æ–≤–µ–Ω—å**: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –Ω–∞ body/html
5. **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞**: setInterval –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å—Ç–∏–ª–µ–π:

```
Inline styles —Å !important (JavaScript setProperty)
> Inline styles (JavaScript style.property)
> CSS !important
> CSS –æ–±—ã—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:

1. –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
```bash
npm run build
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä:
```bash
npm run dev
```

3. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram WebApp

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - ‚úÖ –°–∫—Ä–æ–ª–ª —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ #root
   - ‚úÖ Body –∏ html –Ω–µ —Å–∫—Ä–æ–ª–ª—è—Ç—Å—è
   - ‚úÖ –ù–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∞ "–¥–≤–æ–π–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞"
   - ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–∫—Ä–æ–ª–ª–∞ –≤–≤–µ—Ä—Ö

## –û—Ç–ª–∞–¥–∫–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```
üîí Body scroll BLOCKED via JavaScript with !important
üëÅÔ∏è MutationObserver —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ç–∏–ª–µ–π
üö´ Scroll events blocked on body and html
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:
```
‚ö†Ô∏è Scroll styles were changed, restoring...
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ MutationObserver –æ–±–Ω–∞—Ä—É–∂–∏–ª –ø–æ–ø—ã—Ç–∫—É –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∏–ª–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª –±–ª–æ–∫–∏—Ä–æ–≤–∫—É.

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª–µ–π body
console.log('Body position:', document.body.style.position)
console.log('Body overflow:', document.body.style.overflow)

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª–µ–π html
console.log('HTML position:', document.documentElement.style.position)
console.log('HTML overflow:', document.documentElement.style.overflow)

// –ü–æ–ø—ã—Ç–∫–∞ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∏–ª–∏ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞)
document.body.style.position = 'relative'
// MutationObserver –¥–æ–ª–∂–µ–Ω –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤–µ—Ä–Ω—É—Ç—å position: fixed
```

## –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–ª–∞—Å—Å—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è:
```javascript
console.log('Body classes:', document.body.className)
// –î–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å 'telegram-fullscreen' –∏–ª–∏ 'telegram-env'
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é Telegram:
```javascript
console.log('Telegram version:', window.Telegram?.WebApp?.version)
```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ MutationObserver —Ä–∞–±–æ—Ç–∞–µ—Ç:
```javascript
// –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∏–ª—å –≤—Ä—É—á–Ω—É—é
document.body.style.overflow = 'auto'
// –ß–µ—Ä–µ–∑ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—É –¥–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ 'hidden'
setTimeout(() => {
  console.log('Overflow after change:', document.body.style.overflow)
}, 100)
```

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ Telegram –º–æ–≥—É—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å `disableVerticalSwipes()`
- –ù–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- iOS Safari –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å `position: fixed`

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤—Å–µ –µ—â–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

1. –£–≤–µ–ª–∏—á–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ setInterval (—Å 1000ms –¥–æ 500ms)
2. –î–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –Ω–∞ —É—Ä–æ–≤–Ω–µ window.scrollTo()
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CSS —Å–≤–æ–π—Å—Ç–≤–æ `touch-action: none` –Ω–∞ body
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ª–∏ Telegram —Å—Ç–∏–ª–∏ —á–µ—Ä–µ–∑ Shadow DOM
