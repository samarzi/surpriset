# üõí –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–º–ø–æ—Ä—Ç—É —Ç–æ–≤–∞—Ä–æ–≤ —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤:
- ‚úÖ **Wildberries** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ **Ozon** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞  
- ‚úÖ **–Ø–Ω–¥–µ–∫—Å –ú–∞—Ä–∫–µ—Ç** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

## –®–∞–≥ 1: –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–û—Ç–∫—Ä–æ–π—Ç–µ **Supabase SQL Editor** –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
ALTER TABLE products
ADD COLUMN IF NOT EXISTS is_imported BOOLEAN DEFAULT FALSE,
ADD COLUMN IF NOT EXISTS source_url TEXT,
ADD COLUMN IF NOT EXISTS last_price_check_at TIMESTAMP WITH TIME ZONE;

CREATE INDEX IF NOT EXISTS idx_products_is_imported 
ON products(is_imported) WHERE is_imported = TRUE;

CREATE INDEX IF NOT EXISTS idx_products_price_check 
ON products(last_price_check_at) WHERE is_imported = TRUE;
```

## –®–∞–≥ 2: –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ò–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Üí **–¢–æ–≤–∞—Ä—ã**
2. –ù–∞–∂–º–∏—Ç–µ **"–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä"**
3. –í —Ñ–æ—Ä–º–µ –Ω–∞–π–¥–∏—Ç–µ –±–ª–æ–∫ **"–ò–º–ø–æ—Ä—Ç —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞"**
4. –í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–æ–≤–∞—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://www.wildberries.ru/catalog/123456/detail.aspx`)
5. –ù–∞–∂–º–∏—Ç–µ **"–ó–∞–≥—Ä—É–∑–∏—Ç—å"**
6. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç –≤—Å–µ –ø–æ–ª—è:
   - –ù–∞–∑–≤–∞–Ω–∏–µ
   - –û–ø–∏—Å–∞–Ω–∏–µ
   - –¶–µ–Ω–∞ (—Å –Ω–∞—Ü–µ–Ω–∫–æ–π +20%)
   - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
   - –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
   - –°—Ç–∞—Ç—É—Å –Ω–∞–ª–∏—á–∏—è
7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
8. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä"**

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω

**–ü—Ä–∏ –≤—Ö–æ–¥–µ –≤ –∞–¥–º–∏–Ω–∫—É:**
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ü–µ–Ω—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ (–µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ >24 —á–∞—Å–æ–≤)
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Ü–µ–Ω—ã —Å –Ω–∞—Ü–µ–Ω–∫–æ–π 20%
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞–ª–∏—á–∏—è

**–†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
- –í —Ä–∞–∑–¥–µ–ª–µ "–¢–æ–≤–∞—Ä—ã" –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—ã"**
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤—Å–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
- –ü–æ–∫–∞–∂–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç: —Å–∫–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ, —Å–∫–æ–ª—å–∫–æ –æ—à–∏–±–æ–∫

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –¶–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ

```
–¶–µ–Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞ = –ó–∞–∫—É–ø–æ—á–Ω–∞—è —Ü–µ–Ω–∞
–¶–µ–Ω–∞ –Ω–∞ —Å–∞–π—Ç–µ = –ó–∞–∫—É–ø–æ—á–Ω–∞—è —Ü–µ–Ω–∞ √ó 1.20 (+20%)
```

**–ü—Ä–∏–º–µ—Ä:**
- –¢–æ–≤–∞—Ä –Ω–∞ WB —Å—Ç–æ–∏—Ç 1000‚ÇΩ
- –ù–∞ –≤–∞—à–µ–º —Å–∞–π—Ç–µ –±—É–¥–µ—Ç 1200‚ÇΩ

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
1. –ò–∑–º–µ–Ω–∏–ª–∞—Å—å –ª–∏ —Ü–µ–Ω–∞ –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ
2. –ò–∑–º–µ–Ω–∏–ª—Å—è –ª–∏ —Å—Ç–∞—Ç—É—Å –Ω–∞–ª–∏—á–∏—è
3. –ï—Å–ª–∏ –¥–∞ - –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å –Ω–∞—Ü–µ–Ω–∫–æ–π 20%

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ùå **–ö–ª–∏–µ–Ω—Ç—ã –ù–ï –≤–∏–¥—è—Ç:**
- –ò—Å—Ç–æ—á–Ω–∏–∫ —Ç–æ–≤–∞—Ä–∞ (–º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å)
- –°—Å—ã–ª–∫—É –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å
- –ß—Ç–æ —Ç–æ–≤–∞—Ä –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω

‚úÖ **–¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç:**
- –ë–µ–π–¥–∂ "–ò–º–ø–æ—Ä—Ç" –Ω–∞ —Ç–æ–≤–∞—Ä–µ
- –°—Å—ã–ª–∫—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –≤ —Ñ–æ—Ä–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã

### Wildberries
```
https://www.wildberries.ru/catalog/123456/detail.aspx
https://wb.ru/catalog/123456/detail.aspx
```

### Ozon
```
https://www.ozon.ru/product/–Ω–∞–∑–≤–∞–Ω–∏–µ-—Ç–æ–≤–∞—Ä–∞-123456/
```

### –Ø–Ω–¥–µ–∫—Å –ú–∞—Ä–∫–µ—Ç
```
https://market.yandex.ru/product/123456
```

## –ß—Ç–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è

- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
- ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
- ‚úÖ –ó–∞—á–µ—Ä–∫–Ω—É—Ç–∞—è —Ü–µ–Ω–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–¥–æ 10 —à—Ç)
- ‚úÖ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- ‚úÖ –°—Ç–∞—Ç—É—Å –Ω–∞–ª–∏—á–∏—è

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

‚ö†Ô∏è **–í–∞–∂–Ω–æ:**
- –ü–æ–∫—É–ø–∫–∞ –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ - **–≤—Ä—É—á–Ω—É—é** –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
- –°–∏—Å—Ç–µ–º–∞ –ù–ï –æ—Ñ–æ—Ä–º–ª—è–µ—Ç –∑–∞–∫–∞–∑—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ü–∞—Ä—Å–∏–Ω–≥ –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –µ—Å–ª–∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –∏–∑–º–µ–Ω–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ"

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –ù–µ–≤–µ—Ä–Ω–∞—è —Å—Å—ã–ª–∫–∞
2. –¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞
3. –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –∏–∑–º–µ–Ω–∏–ª —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
4. –ü—Ä–æ–±–ª–µ–º—ã —Å CORS proxy

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Å—ã–ª–∫—É
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π —Ç–æ–≤–∞—Ä
- –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä –≤—Ä—É—á–Ω—É—é

### –¶–µ–Ω—ã –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ –ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è –ë–î
2. –ï—Å—Ç—å –ª–∏ –ø–æ–ª–µ `source_url` —É —Ç–æ–≤–∞—Ä–∞
3. –ü—Ä–æ—à–ª–æ –ª–∏ >24 —á–∞—Å–æ–≤ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
MarketplaceParserFactory
‚îú‚îÄ‚îÄ WildberriesParser
‚îú‚îÄ‚îÄ OzonParser
‚îî‚îÄ‚îÄ YandexMarketParser
```

### –§–∞–π–ª—ã

- `src/lib/marketplaceParsers.ts` - –ø–∞—Ä—Å–µ—Ä—ã –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤
- `src/lib/priceUpdateService.ts` - —Å–µ—Ä–≤–∏—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω
- `src/lib/adminPriceSync.ts` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- `src/components/admin/ProductForm.tsx` - —Ñ–æ—Ä–º–∞ —Å –∏–º–ø–æ—Ä—Ç–æ–º
- `migrations/008_add_marketplace_import_fields.sql` - –º–∏–≥—Ä–∞—Ü–∏—è –ë–î

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ù–æ–≤—ã–µ –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü–µ `products`:
- `is_imported` (boolean) - —Ñ–ª–∞–≥ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
- `source_url` (text) - URL –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- `last_price_check_at` (timestamp) - –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

## –î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ

–í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- [ ] –ú–∞—Å—Å–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç –ø–æ —Å–ø–∏—Å–∫—É —Å—Å—ã–ª–æ–∫
- [ ] –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω (cron)
- [ ] –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ü–µ–Ω
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤
- [ ] API –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞

---

**–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤! üéâ**
